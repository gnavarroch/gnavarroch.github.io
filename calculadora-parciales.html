<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Parciales - Trading</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
        background: #f0f4f8;
        display: flex;
        justify-content: center;
        padding: 40px 20px;
    }
    .container {
        background: #ffffffcc;
        backdrop-filter: blur(10px);
        padding: 30px 25px;
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        max-width: 520px;
        width: 100%;
        transition: transform 0.3s;
    }
    .container:hover {
        transform: translateY(-5px);
    }
    h1 {
        text-align: center;
        color: #1a1a1a;
        margin-bottom: 20px;
        font-size: 2em;
    }
    .explicacion {
        background: #007BFF;
        color: white;
        padding: 15px;
        border-radius: 12px;
        font-size: 14px;
        margin-bottom: 20px;
        line-height: 1.5;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    label {
        font-weight: 600;
        margin-top: 10px;
        display: block;
    }
    input {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 16px;
        transition: border 0.3s, box-shadow 0.3s;
    }
    input:focus {
        border: 2px solid #007BFF;
        outline: none;
        box-shadow: 0 0 8px rgba(0,123,255,0.5);
    }
    button {
        margin-top: 12px;
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 12px;
        background: linear-gradient(90deg, #007BFF, #00C6FF);
        color: white;
        font-weight: 600;
        font-size: 16px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 18px rgba(0,0,0,0.25);
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    th, td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid #ddd;
    }
    th {
        background: #007BFF;
        color: white;
    }
    tr:last-child td {
        border-bottom: none;
    }
    .remove-btn {
        background: #FF4D4D;
        border: none;
        border-radius: 6px;
        padding: 6px 12px;
        color: white;
        cursor: pointer;
        font-weight: bold;
        transition: transform 0.2s;
    }
    .remove-btn:hover {
        transform: scale(1.1);
    }
    #resultado {
        margin-top: 25px;
        font-size: 1.3em;
        font-weight: bold;
        color: #007BFF;
        text-align: center;
        padding: 12px;
        background: #e7f1ff;
        border-radius: 12px;
        box-shadow: inset 0 2px 6px rgba(0,123,255,0.2);
    }
    .creditos {
        margin-top: 20px;
        font-size: 12px;
        text-align: center;
        color: #555;
    }
    .creditos a {
        color: #007BFF;
        text-decoration: none;
        font-weight: 600;
    }
    .creditos a:hover {
        text-decoration: underline;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Calculadora de Parciales</h1>

    <div class="explicacion">
        Calcula la ganancia de un trade con parciales.<br>
        <strong>Uso:</strong><br>
        1. Ingresa tu riesgo inicial.<br>
        2. Añade parciales con % de posición y R:R.<br>
        3. El resultado se actualiza automáticamente mostrando multiplicador y ganancia total.
    </div>

    <label for="riesgo">Riesgo inicial ($):</label>
    <input type="number" id="riesgo" placeholder="Ej: 100" oninput="calcular()">

    <button onclick="agregarParcial()">+ Agregar parcial</button>

    <table id="tablaParciales">
        <thead>
            <tr>
                <th>% de posición</th>
                <th>Ganancia (R:R)</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="number" class="porcentaje" placeholder="50" oninput="calcular()"></td>
                <td><input type="number" class="rr" placeholder="1" oninput="calcular()"></td>
                <td><button class="remove-btn" onclick="eliminarFila(this)">X</button></td>
            </tr>
        </tbody>
    </table>

    <div id="resultado">Multiplicador sobre riesgo: 0x | Ganancia total: $0</div>

    <div class="creditos">
        Calculadora por <strong>Gabo</strong>, miembro de <a href="https://www.skool.com/ef-trading" target="_blank">EF Trading</a>
    </div>
</div>

<script>
function agregarParcial() {
    const tbody = document.querySelector("#tablaParciales tbody");
    const fila = document.createElement("tr");
    fila.innerHTML = `
        <td><input type="number" class="porcentaje" placeholder="25" oninput="calcular()"></td>
        <td><input type="number" class="rr" placeholder="2" oninput="calcular()"></td>
        <td><button class="remove-btn" onclick="eliminarFila(this)">X</button></td>
    `;
    tbody.appendChild(fila);
    calcular();
}

function eliminarFila(boton) {
    boton.closest('tr').remove();
    calcular();
}

function calcular() {
    const riesgo = parseFloat(document.getElementById('riesgo').value);
    if (!riesgo || riesgo <= 0) {
        document.getElementById('resultado').innerText = "Multiplicador sobre riesgo: 0x | Ganancia total: $0";
        return;
    }

    const filas = document.querySelectorAll('#tablaParciales tbody tr');
    let gananciaTotal = 0;

    filas.forEach(fila => {
        const porcentaje = parseFloat(fila.querySelector('.porcentaje').value);
        const rr = parseFloat(fila.querySelector('.rr').value);
        if (!porcentaje || !rr) return;
        gananciaTotal += (porcentaje / 100) * riesgo * rr;
    });

    const multiplicador = gananciaTotal / riesgo;
    document.getElementById('resultado').innerText =
        `Multiplicador sobre riesgo: ${multiplicador.toFixed(2)}x | Ganancia total: $${gananciaTotal.toFixed(2)}`;
}
</script>

</body>
</html>
