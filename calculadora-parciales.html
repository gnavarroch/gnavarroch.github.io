<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Parciales - Trading</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-yHqzvX+9aF5H6K6fOStk7kSDEGQ8Y6b1+oV6n2sR1I9lqMvWVD9HURqlWZz0eGll1Z9Z6eLh9dcg3yZTVI8GqQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
body { font-family:'Inter',sans-serif; margin:0; padding:40px 20px; display:flex; justify-content:center; background:#f0f4f8; transition:background 0.3s;color:#000; }
body.dark { background:#121212; color:#e0e0e0; }
.container { background:#ffffffcc; backdrop-filter:blur(10px); padding:30px 25px; border-radius:20px; box-shadow:0 15px 35px rgba(0,0,0,0.2); max-width:520px; width:100%; transition:all 0.3s; }
body.dark .container { background:#1e1e1ecc; box-shadow:0 15px 35px rgba(0,0,0,0.7);}
.container:hover { transform:translateY(-5px);}
h1 { text-align:center; margin-bottom:20px; font-size:2em; }
h2 { text-align:center; font-size:1.2em; color:#555; margin-bottom:20px; }
body.dark h2 { color:#ccc; }
.explicacion { background:#007BFF; color:white; padding:15px; border-radius:12px; font-size:14px; margin-bottom:20px; line-height:1.5; box-shadow:0 4px 10px rgba(0,0,0,0.15);}
label { font-weight:600; margin-top:10px; display:block; }
input { width:100%; padding:10px; margin-top:5px; border-radius:8px; border:1px solid #ccc; font-size:16px; transition:0.3s; background:#fff; color:#000; }
body.dark input { background:#2a2a2a; color:#e0e0e0; border:1px solid #555;}
input:focus { border:2px solid #007BFF; outline:none; box-shadow:0 0 8px rgba(0,123,255,0.5);}
button { margin-top:12px; width:100%; padding:12px; border:none; border-radius:12px; background:linear-gradient(90deg,#007BFF,#00C6FF); color:white; font-weight:600; font-size:16px; cursor:pointer; transition:0.2s; display:flex; align-items:center; justify-content:center; gap:8px; }
button:hover { transform:translateY(-3px); box-shadow:0 8px 18px rgba(0,0,0,0.25);}
table { width:100%; border-collapse:collapse; margin-top:15px; border-radius:12px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1);}
body.dark table { box-shadow:0 5px 15px rgba(0,0,0,0.6);}
th, td { padding:12px; text-align:center; border-bottom:1px solid #ddd; transition:0.3s; }
body.dark th, body.dark td { border-bottom:1px solid #555; color:#e0e0e0;}
th { background:#007BFF; color:white; }
tr:last-child td { border-bottom:none; }
.remove-btn { background:#FF4D4D; border:none; border-radius:6px; padding:6px 12px; color:white; cursor:pointer; font-weight:bold; transition:0.2s; display:flex; align-items:center; justify-content:center; gap:5px; }
.remove-btn:hover { transform:scale(1.1);}
#resultado { margin-top:25px; font-size:1.3em; font-weight:bold; text-align:center; padding:12px; background:#e7f1ff; border-radius:12px; box-shadow:inset 0 2px 6px rgba(0,123,255,0.2); transition:0.3s; }
body.dark #resultado { background:#2a2a2a; color:#00C6FF; box-shadow:inset 0 2px 6px rgba(0,200,255,0.2);}
.creditos { margin-top:20px; font-size:12px; text-align:center; color:#555; }
.creditos a { color:#007BFF; text-decoration:none; font-weight:600;}
.creditos a:hover { text-decoration:underline;}
.theme-switch { display:flex; justify-content:flex-end; margin-bottom:15px; align-items:center; font-size:14px; }
.theme-switch input[type="checkbox"] { margin-left:10px; transform:scale(1.2); cursor:pointer; }
.parcial-positivo { background-color:#d4f8d4; transition:0.3s; }
</style>
</head>
<body>

<div class="container">
    <div class="theme-switch">
        <i class="fa-solid fa-moon"></i> <input type="checkbox" id="toggleTheme">
    </div>

    <h1>Calculadora de Parciales</h1>

    <h2>Calcula tus ganancias por parcial de manera rápida y clara.</h2>

    <label for="riesgo">Riesgo inicial ($):</label>
    <input type="number" id="riesgo" placeholder="Ej: 100" oninput="calcular()">

    <button onclick="agregarParcial()"><i class="fa-solid fa-plus"></i> Agregar parcial</button>

    <table id="tablaParciales">
        <thead>
            <tr>
                <th>% de posición</th>
                <th>Ganancia (R:R)</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="number" class="porcentaje" placeholder="50" oninput="calcular()"></td>
                <td><input type="number" class="rr" placeholder="1" oninput="calcular()"></td>
                <td><button class="remove-btn" onclick="eliminarFila(this)"><i class="fa-solid fa-xmark"></i></button></td>
            </tr>
        </tbody>
    </table>

    <div id="resultado">Multiplicador: 0x | Ganancia total: $0</div>

    <div class="creditos">
        Calculadora por <strong>Gabo</strong>, miembro de <a href="https://www.skool.com/ef-trading" target="_blank">EF Trading</a>
    </div>
</div>

<script>
document.getElementById('toggleTheme').addEventListener('change', function() {
    document.body.classList.toggle('dark', this.checked);
});

function agregarParcial() {
    const tbody = document.querySelector("#tablaParciales tbody");
    const fila = document.createElement("tr");
    fila.innerHTML = `
        <td><input type="number" class="porcentaje" placeholder="25" oninput="calcular()"></td>
        <td><input type="number" class="rr" placeholder="2" oninput="calcular()"></td>
        <td><button class="remove-btn" onclick="eliminarFila(this)"><i class="fa-solid fa-xmark"></i></button></td>
    `;
    tbody.appendChild(fila);
    calcular();
}

function eliminarFila(boton) {
    boton.closest('tr').remove();
    calcular();
}

function calcular() {
    const riesgo = parseFloat(document.getElementById('riesgo').value) || 0;
    const filas = document.querySelectorAll('#tablaParciales tbody tr');
    let gananciaTotal = 0;
    let sumaParciales = 0;

    filas.forEach(fila => {
        fila.classList.remove('parcial-positivo');
        const porcentaje = parseFloat(fila.querySelector('.porcentaje').value) || 0;
        const rr = parseFloat(fila.querySelector('.rr').value) || 0;
        sumaParciales += porcentaje;
        const ganancia = (porcentaje/100)*riesgo*rr;
        gananciaTotal += ganancia;
        if(ganancia>0) fila.classList.add('parcial-positivo');
    });

    if(sumaParciales>100) alert("La suma de parciales excede 100%");

    const multiplicador = riesgo>0 ? (gananciaTotal/ riesgo) : 0;
    document.getElementById('resultado').innerText = `Multiplicador: ${multiplicador.toFixed(2)}x | Ganancia total: $${gananciaTotal.toFixed(2)}`;
}
</script>

</body>
</html>
